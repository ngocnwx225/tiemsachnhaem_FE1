<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<<<<<<< HEAD
    <link rel="stylesheet" href="style_QLKH.css">
=======
    <link rel="stylesheet" href="../assets/css/style_QLKH.css">
>>>>>>> eeded72576e75b64aeb2996353b5071ec6d93e31
</head>
<body>
<h1>QUẢN LÝ KHÁCH HÀNG</h1>

  <div class="search-filter">
    <input type="text" class="search-bar" id="searchInput" placeholder="Tìm theo tên, email, số điện thoại...">
    <button class="filter-btn" onclick="toggleFilter()">Tất cả trạng thái <img src="https://img.icons8.com/material-rounded/24/000000/filter.png" alt="filter"></button>
    <div class="filter-options" id="filterOptions">
      <label><input type="radio" name="status" value="all" checked onclick="filterStatus('all')"> Tất cả</label>
      <label><input type="radio" name="status" value="active" onclick="filterStatus('active')"> Hoạt động</label>
      <label><input type="radio" name="status" value="blocked" onclick="filterStatus('blocked')"> Bị khóa</label>
    </div>
  </div>

  <div class="table-container">
    <table id="customerTable">
      <thead>
        <tr>
          <th>Khách hàng</th>
          <th>Số đơn hàng</th>
          <th>Tổng chi tiêu</th>
          <th>Trạng thái</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody id="customerList">
        <tr data-status="active">
          <td>
            <strong>Nguyen Van A</strong><br>
            nguyenvana@example.com<br>
            0901234567
          </td>
          <td>5</td>
          <td>3,250,000đ</td>
          <td><span class="status active">Hoạt động</span></td>
          <td class="actions">
            <img src="https://img.icons8.com/material-outlined/24/000000/visible.png" alt="view" onclick="showPopup('Nguyen Van A', 'nguyenvana@example.com', '0901234567', '123 Nguyen Van Linh, Quan 7, TP.HCM', '10/01/2023', 5, '3,250,000đ', '12/07/2023', this.parentNode.parentNode)">
            <img src="https://img.icons8.com/material-outlined/24/ff0000/lock.png" alt="block" onclick="showConfirmPopup('Nguyen Van A', this.parentNode.parentNode)">
          </td>
        </tr>
        <tr data-status="active">
          <td>
            <strong>Tran Thi B</strong><br>
            tranthib@example.com<br>
            0907854321
          </td>
          <td>3</td>
          <td>1,750,000đ</td>
          <td><span class="status active">Hoạt động</span></td>
          <td class="actions">
            <img src="https://img.icons8.com/material-outlined/24/000000/visible.png" alt="view" onclick="showPopup('Tran Thi B', 'tranthib@example.com', '0907854321', '456 Tran Phu, Quan 5, TP.HCM', '15/03/2023', 3, '1,750,000đ', '20/08/2023', this.parentNode.parentNode)">
            <img src="https://img.icons8.com/material-outlined/24/ff0000/lock.png" alt="block" onclick="showConfirmPopup('Tran Thi B', this.parentNode.parentNode)">
          </td>
        </tr>
        <tr data-status="blocked">
          <td>
            <strong>Le Van C</strong><br>
            levanc@example.com<br>
            0901239543
          </td>
          <td>2</td>
          <td>1,520,000đ</td>
          <td><span class="status blocked">Bị khóa</span></td>
          <td class="actions">
            <img src="https://img.icons8.com/material-outlined/24/000000/visible.png" alt="view" onclick="showPopup('Le Van C', 'levanc@example.com', '0901239543', '789 Le Loi, Quan 1, TP.HCM', '20/05/2023', 2, '1,520,000đ', '25/09/2023', this.parentNode.parentNode)">
            <img src="https://img.icons8.com/material-outlined/24/00ff00/unlock.png" alt="unblock" onclick="showUnlockPopup('Le Van C', this.parentNode.parentNode)">
          </td>
        </tr>
        <tr data-status="active">
          <td>
            <strong>Pham Thi D</strong><br>
            phamthid@example.com<br>
            0908765432
          </td>
          <td>1</td>
          <td>450,000đ</td>
          <td><span class="status active">Hoạt động</span></td>
          <td class="actions">
            <img src="https://img.icons8.com/material-outlined/24/000000/visible.png" alt="view" onclick="showPopup('Pham Thi D', 'phamthid@example.com', '0908765432', '321 Pham Van Dong, Quan 2, TP.HCM', '25/07/2023', 1, '450,000đ', '30/10/2023', this.parentNode.parentNode)">
            <img src="https://img.icons8.com/material-outlined/24/ff0000/lock.png" alt="block" onclick="showConfirmPopup('Pham Thi D', this.parentNode.parentNode)">
          </td>
        </tr>
        <tr data-status="active">
          <td>
            <strong>Hoang Van E</strong><br>
            hoangvane@example.com<br>
            0901232334
          </td>
          <td>4</td>
          <td>2,850,000đ</td>
          <td><span class="status active">Hoạt động</span></td>
          <td class="actions">
            <img src="https://img.icons8.com/material-outlined/24/000000/visible.png" alt="view" onclick="showPopup('Hoang Van E', 'hoangvane@example.com', '0901232334', '654 Hoang Hoa Tham, Quan 3, TP.HCM', '30/09/2023', 4, '2,850,000đ', '05/11/2023', this.parentNode.parentNode)">
            <img src="https://img.icons8.com/material-outlined/24/ff0000/lock.png" alt="block" onclick="showConfirmPopup('Hoang Van E', this.parentNode.parentNode)">
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Popup Thông Tin Khách Hàng -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup">
      <div class="popup-header">
        <h2>THÔNG TIN KHÁCH HÀNG</h2>
        <button class="close-btn" onclick="closePopup()">✖</button>
      </div>
      <div class="popup-content">
        <div class="popup-left">
          <h3>Thông tin cá nhân</h3>
          <p><strong>Tên:</strong> <span id="popupName"></span></p>
          <p><strong>Email:</strong> <span id="popupEmail"></span></p>
          <p><strong>Số điện thoại:</strong> <span id="popupPhone"></span></p>
          <p><strong>Địa chỉ:</strong> <span id="popupAddress"></span></p>
          <p><strong>Ngày đăng ký:</strong> <span id="popupRegDate"></span></p>
          <p><strong>Trạng thái:</strong> <span id="popupStatus"></span></p>
        </div>
        <div class="popup-right">
          <h3>Thông kê mua hàng</h3>
          <p><strong>Tổng số đơn hàng:</strong> <span id="popupOrderCount"></span></p>
          <p><strong>Tổng chi tiêu:</strong> <span id="popupTotalSpent"></span></p>
          <p><strong>Đơn hàng gần nhất:</strong> <span id="popupLastOrder"></span></p>
          <h3>Lịch sử đơn hàng</h3>
          <table>
            <thead>
              <tr>
                <th>Mã đơn</th>
                <th>Ngày đặt</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
              </tr>
            </thead>
            <tbody id="popupOrderHistory">
            </tbody>
          </table>
        </div>
      </div>
      <div class="popup-footer">
        <button class="block-btn" onclick="showConfirmPopupFromPopup(document.getElementById('popupName').textContent, document.getElementById('popupStatus').textContent === 'Bị khóa')"><img src="https://img.icons8.com/material-outlined/24/ffffff/lock.png" alt="lock"> KHÓA TÀI KHOẢN</button>
        <button class="close-btn-footer" onclick="closePopup()">ĐÓNG</button>
      </div>
    </div>
  </div>

  <!-- Popup Xác Nhận Khóa Tài Khoản -->
  <div class="confirm-overlay" id="confirmOverlay">
    <div class="confirm-popup">
      <h3>Xác nhận khóa tài khoản</h3>
      <p>Bạn có chắc chắn muốn khóa tài khoản này?</p>
      <p>Hành động này sẽ ảnh hưởng đến hóa đơn.</p>
      <div class="time-options">
        <label><input type="radio" name="blockTime" value="5000" checked> 5 giây</label>
        <label><input type="radio" name="blockTime" value="900000"> 15 phút</label>
        <label><input type="radio" name="blockTime" value="1800000"> 30 phút</label>
        <label><input type="radio" name="blockTime" value="7200000"> 2 tiếng</label>
        <label><input type="radio" name="blockTime" value="36000000"> 10 tiếng</label>
        <label><input type="radio" name="blockTime" value="indefinite"> Đến khi mở lại</label>
      </div>
      <div class="confirm-footer">
        <button class="cancel-btn" onclick="closeConfirmPopup()">Hủy</button>
        <button class="confirm-btn" onclick="confirmBlockAction()"><img src="https://img.icons8.com/material-outlined/24/ffffff/lock.png" alt="lock"> KHÓA</button>
      </div>
    </div>
  </div>

  <!-- Popup Xác Nhận Mở Khóa -->
  <div class="unlock-overlay" id="unlockOverlay">
    <div class="unlock-popup">
      <h3><img src="https://img.icons8.com/material-outlined/24/4caf50/checkmark.png" alt="check"> Khóa thành công</h3>
      <p>Tài khoản này đã bị khóa trước đó.</p>
      <p>Bạn có muốn mở khóa tài khoản này ngay không?</p>
      <div class="confirm-footer">
        <button class="cancel-btn" onclick="closeUnlockPopup()">Hủy</button>
        <button class="unlock-btn" onclick="confirmUnlockAction()"><img src="https://img.icons8.com/material-outlined/24/ffffff/unlock.png" alt="unlock"> MỞ KHÓA</button>
      </div>
    </div>
  </div>

  <!-- Popup Khóa Thành Công -->
  <div class="success-overlay" id="successOverlay">
    <div class="success-popup">
      <h3><img src="https://img.icons8.com/material-outlined/24/4caf50/checkmark.png" alt="check"> Khóa thành công</h3>
      <p>Tài khoản đã được khóa thành công.</p>
      <div class="confirm-footer">
        <button class="close-btn-footer" onclick="closeSuccessPopup()">Đóng</button>
      </div>
    </div>
  </div>

<<<<<<< HEAD
<script src="script_QLKH.js"></script>
=======
<script src="../assets/js/script_QLKH.js"></script>
>>>>>>> eeded72576e75b64aeb2996353b5071ec6d93e31
</body>
</html>